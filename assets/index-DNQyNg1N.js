var e=Object.defineProperty,t=(t,i,s)=>((t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s)(t,"symbol"!=typeof i?i+"":i,s);import{p as i}from"./phaser-CwoquCe3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class s extends i.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}const a=64;var o=(e=>(e.LEVEL_1_GROUND="LEVEL_1_GROUND",e.LEVEL_1_ITEMS="LEVEL_1_ITEMS",e))(o||{}),r=(e=>(e.TILESET="TILESET",e))(r||{});function n(){const e=this.make.tilemap({key:o.LEVEL_1_GROUND,tileWidth:a,tileHeight:a}),t=e.addTilesetImage(r.TILESET);e.createLayer(0,t??"",0,0);const i=this.make.tilemap({key:o.LEVEL_1_ITEMS,tileWidth:a,tileHeight:a});return i.addTilesetImage(r.TILESET),i.createLayer(0,t??"",0,0),[e,i]}class h{constructor(e){t(this,"scene"),t(this,"highlight"),this.scene=e}create(){return this.highlight=this.scene.add.graphics(),this.highlight.lineStyle(2,16776960,1),this.highlight.strokeRect(0,0,a,a),this.highlight.setVisible(!1),this}update(e){const t=this.scene.input.activePointer.positionToCamera(this.scene.cameras.main),i=Math.floor(t.x/a),s=Math.floor(t.y/a),o=i*a,r=s*a;this.highlight.setPosition(o,r),this.highlight.setDepth(1);const n=e.width*a,h=e.height*a;t.x<0||t.y<0||t.x>=n||t.y>=h?this.highlight.setVisible(!1):this.highlight.setVisible(!0)}}class c{constructor(e){t(this,"scene"),this.scene=e}show(e,t,i,s){const a=e.positionToCamera(t),o=i.layers[0].tilemapLayer.getTileAtWorldXY(a.x,a.y);if(o){const e=`You clicked tile at row=${o.y}, col=${o.x}, index=${o.index}`;s=s.concat(" "+e)}else console.log("No tile at that position");const r=this.scene.add.text(e.x,e.y-20,s,{font:"16px Arial",color:"#ffffff",backgroundColor:"#000000",padding:{x:5,y:3}});r.setOrigin(.5),this.scene.tweens.add({targets:r,alpha:0,duration:3e3,ease:"Power1",onComplete:()=>r.destroy()})}}class l extends i.Scene{constructor(){super("Game"),t(this,"camera"),t(this,"background"),t(this,"messageText"),t(this,"highlight"),t(this,"mapGround"),t(this,"mapItems")}create(){var e;this.camera=this.cameras.main,this.camera.setBackgroundColor(65280),this.highlight=new h(this).create(),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5);const[t,i]=n.call(this);this.mapGround=t,this.mapItems=i;const s=new c(this);this.input.on("pointerdown",(e=>{s.show(e,this.camera,this.mapGround,"You clicked!")})),null==(e=this.input.keyboard)||e.on("keydown-ESC",(()=>{this.scene.start("GameOver")}))}update(){this.highlight.update({width:this.mapGround.width,height:this.mapGround.height})}}class d extends i.Scene{constructor(){super("GameOver"),t(this,"camera"),t(this,"background"),t(this,"gameover_text")}create(){this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.background=this.add.image(512,384,"background"),this.background.setAlpha(.5),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class g extends i.Scene{constructor(){super("MainMenu"),t(this,"background"),t(this,"logo"),t(this,"title"),t(this,"subTitle")}create(){this.background=this.add.image(512,384,"background"),this.logo=this.add.image(512,300,"logo"),this.title=this.add.text(512,460,"Tere, SEENED!",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.subTitle=this.add.text(512,530,"Kliki, et edasi minna",{fontFamily:"Arial Black",fontSize:28,color:"#ffffff",stroke:"#000000",strokeThickness:2,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class u extends i.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image(r.TILESET,"images/tiles.png"),this.load.tilemapCSV(o.LEVEL_1_GROUND,"maps/level-1_ground.csv"),this.load.tilemapCSV(o.LEVEL_1_ITEMS,"maps/level-1_items.csv")}create(){this.scene.start("MainMenu")}}const m={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[s,u,g,l,d]};new i.Game(m);
